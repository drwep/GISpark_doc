

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Shapely &mdash; GISpark 0.1 文档</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="GISpark 0.1 文档" href="../../index.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> GISpark
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../gispark_prefix.html">前言</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../gispark_profile.html">1. GISpark简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gispark_cloud.html">2. 云计算基础设施</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gispark_paas.html">3. 分布式计算与持续交付</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gispark_saas.html">4. 地理空间信息服务平台</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gispark_process.html">5. 地理空间信息数据处理</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gispark_mapping.html">6. 地理制图与空间可视化</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gispark_analyst.html">7. 高级空间分析</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gispark_network.html">8. 地理空间网络</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gispark_stream.html">9. 实时流处理</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gispark_dimension.html">10. 多维时空分析</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gispark_ml.html">11. 机器学习框架</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gispark_science.html">12. 模型构建与共享</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../gispark_appendix.html">附录</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">GISpark</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
    <li>Shapely</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/geospatial/geopandas/shapely.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput > div,
div.nbinput div[class^=highlight],
div.nbinput div[class^=highlight] pre,
div.nboutput,
div.nboutput > div,
div.nboutput div[class^=highlight],
div.nboutput div[class^=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class^=highlight] pre {
    line-height: unset;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput > :first-child pre {
    color: #303F9F;
}

/* output prompt */
div.nboutput > :first-child pre {
    color: #D84315;
}

/* all prompts */
div.nbinput > :first-child[class^=highlight],
div.nboutput > :first-child[class^=highlight],
div.nboutput > :first-child {
    min-width: 11ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}

/* input/output area */
div.nbinput > :nth-child(2)[class^=highlight],
div.nboutput > :nth-child(2),
div.nboutput > :nth-child(2)[class^=highlight] {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
}

/* input area */
div.nbinput > :nth-child(2)[class^=highlight] {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput  > :nth-child(2).stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-bold { font-weight: bold; }
</style>
<div class="section" id="Shapely">
<h1>Shapely<a class="headerlink" href="#Shapely" title="永久链接至标题">¶</a></h1>
<p><a class="reference external" href="http://toblerity.org/shapely/project.html">Shapely</a>-Manipulation and
analysis of geometric objects in the Cartesian plane.</p>
<p>Shapely is a BSD-licensed Python package for manipulation and analysis
of planar geometric objects. It is based on the widely deployed GEOS
(the engine of PostGIS) and JTS (from which GEOS is ported) libraries.
Shapely is not concerned with data formats or coordinate systems, but
can be readily integrated with packages that are. For more details, see:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Shapely</span> <span class="n">manual</span>
<span class="n">Shapely</span> <span class="n">example</span> <span class="n">apps</span>
</pre></div>
</div>
<div class="section" id="Requirements">
<h2>Requirements<a class="headerlink" href="#Requirements" title="永久链接至标题">¶</a></h2>
<p>Shapely 1.3 requires</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Python</span> <span class="o">&gt;=</span><span class="mf">2.6</span> <span class="p">(</span><span class="n">including</span> <span class="n">Python</span> <span class="mf">3.</span><span class="n">x</span><span class="p">)</span>
<span class="n">libgeos_c</span> <span class="o">&gt;=</span><span class="mf">3.1</span> <span class="p">(</span><span class="mf">3.0</span> <span class="ow">and</span> <span class="n">below</span> <span class="n">have</span> <span class="ow">not</span> <span class="n">been</span> <span class="n">tested</span><span class="p">,</span> <span class="n">YMMV</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="Installation">
<h2>Installation<a class="headerlink" href="#Installation" title="永久链接至标题">¶</a></h2>
<p>Windows users should use the executable installer, which contains the
required GEOS DLL. Other users should acquire libgeos_c by any means,
make sure that it is on the system library path, and install from the
Python package index:</p>
<p>$ pip install Shapely</p>
<p>or from a source distribution with the setup script:</p>
<p>$ python setup.py install</p>
<ul class="simple">
<li>Warning</li>
</ul>
<p>Windows users: do not under any circumstances use pip (or easy_install)
to uninstall Shapely versions &lt; 1.2.17. Due to the way Shapely used to
install its GEOS DLL and a distribute or setuptools bug, your Python
installation may be broken by an uninstall command. Shapely 1.2.17 will
uninstall safely.</p>
</div>
<div class="section" id="Usage">
<h2>Usage<a class="headerlink" href="#Usage" title="永久链接至标题">¶</a></h2>
<p>Here is the canonical example of building an approximately circular
patch by buffering a point:</p>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [2]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span>from shapely.geometry import Point

patch = Point(0.0, 0.0).buffer(10.0)
patch
#&lt;shapely.geometry.polygon.Polygon object at 0x...&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>Out[2]:
</pre></div>
</div>
<div class="container">
<img src="../../_images/geospatial_geopandas_shapely_1_0.svg" /></div>
</div>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [3]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span>patch.area
#313.65484905459385
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>Out[3]:
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre>
<span></span>313.6548490545939
</pre></div>
</div>
</div>
<p>See the manual for comprehensive usage snippets and the dissolve.py and
intersect.py example apps. Integration</p>
<p>Shapely does not read or write data files, but it can serialize and
deserialize using several well known formats and protocols. The
shapely.wkb and shapely.wkt modules provide dumpers and loaders inspired
by Python’s pickle module.:</p>
<blockquote>
<div>from shapely.wkt import dumps, loads dumps(loads(&#8216;POINT (0
0)&#8217;)) &#8216;POINT (0.0000000000000000 0.0000000000000000)&#8217;</div></blockquote>
<p>All linear objects, such as the rings of a polygon (like patch above),
provide the Numpy array interface.:</p>
<blockquote>
<div>from numpy import asarray ag = asarray(patch.exterior) ag
array([[ 1.00000000e+01, 0.00000000e+00], [ 9.95184727e+00,
-9.80171403e-01], [ 9.80785280e+00, -1.95090322e+00], ... [
1.00000000e+01, 0.00000000e+00]])</div></blockquote>
<p>That yields a Numpy array of [x, y] arrays. This is not always exactly
what one wants for plotting shapes with Matplotlib (for example), so
Shapely 1.2 adds a xy property for obtaining separate arrays of
coordinate x and y values.:</p>
<blockquote>
<div>x, y = patch.exterior.xy ax = asarray(x) ax array([
1.00000000e+01, 9.95184727e+00, 9.80785280e+00, ...])</div></blockquote>
<p>Numpy arrays can also be adapted to Shapely linestrings:</p>
<blockquote>
<div>from shapely.geometry import asLineString
asLineString(ag).length 62.806623139095073
asLineString(ag).wkt &#8216;LINESTRING (10.0000000000000000
0.0000000000000000, ...)&#8217;</div></blockquote>
<p>Shapely can also integrate with other Python GIS packages using data
modeled after GeoJSON.</p>
<blockquote>
<div>import json from shapely.geometry import mapping, shape s =
shape(json.loads(&#8216;{&#8220;type&#8221;: &#8220;Point&#8221;, &#8220;coordinates&#8221;: [0.0,
0.0]}&#8217;)) s print(json.dumps(mapping(s))) {&#8220;type&#8221;: &#8220;Point&#8221;,
&#8220;coordinates&#8221;: [0.0, 0.0]}</div></blockquote>
<p>Development and Testing</p>
<p>Dependecies for developing Shapely are listed in requirements-dev.txt.
Cython and Numpy are not required for production installations, only for
development. Use of a virtual environment is strongly recommended.:</p>
<p>$ virtualenv . $ source bin/activate (env)$ pip install -r
requirements-dev.txt (env)$ python setup.py develop</p>
<p>Shapely uses a Zope-stye suite of unittests and doctests, exercised via
setup.py.:</p>
<p>(env)$ python setup.py test</p>
<p>Nosetests won’t run the tests properly; Zope doctest suites are not
currently supported well by nose. Support</p>
<p>Please discuss Shapely with us at
<a class="reference external" href="http://lists.gispython.org/mailman/listinfo/community">http://lists.gispython.org/mailman/listinfo/community</a>.</p>
<p>Bugs may be reported at <a class="reference external" href="https://github.com/Toblerity/Shapely">https://github.com/Toblerity/Shapely</a>. Credits</p>
<p>Shapely is written by:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Sean</span> <span class="n">Gillies</span>
<span class="n">Aron</span> <span class="n">Bierbaum</span>
<span class="n">Kai</span> <span class="n">Lautaportti</span>
<span class="n">Oliver</span> <span class="n">Tonnhofer</span>
</pre></div>
</div>
<p>Patches contributed by:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Allan</span> <span class="n">Adair</span> <span class="p">(</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">allanadair</span><span class="p">)</span>
<span class="n">Howard</span> <span class="n">Butler</span>
<span class="n">Gabi</span> <span class="n">Davar</span> <span class="p">(</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">mindw</span><span class="p">)</span>
<span class="n">Phil</span> <span class="n">Elson</span> <span class="p">(</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">pelson</span><span class="p">)</span>
<span class="n">Johan</span> <span class="n">Euphrosine</span> <span class="p">(</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">proppy</span><span class="p">)</span>
<span class="n">Bertrand</span> <span class="n">Gervais</span> <span class="p">(</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">BertrandGervais</span><span class="p">)</span>
<span class="n">Marc</span> <span class="n">Jansen</span> <span class="p">(</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">marcjansen</span><span class="p">)</span>
<span class="n">Kelsey</span> <span class="n">Jordahl</span> <span class="p">(</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">kjordahl</span><span class="p">)</span>
<span class="n">Frédéric</span> <span class="n">Junod</span>
<span class="n">Thomas</span> <span class="n">Kluyver</span> <span class="p">(</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">takluyver</span><span class="p">)</span>
<span class="n">Eric</span> <span class="n">Lemoine</span>
<span class="n">Naveen</span> <span class="n">Michaud</span><span class="o">-</span><span class="n">Agrawal</span> <span class="p">(</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">nmichaud</span><span class="p">)</span>
<span class="n">psagers</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">psagers</span>
<span class="n">Jeethu</span> <span class="n">Rao</span> <span class="p">(</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">jeethu</span><span class="p">)</span>
<span class="n">Benjamin</span> <span class="n">Root</span> <span class="p">(</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">WeatherGod</span><span class="p">)</span>
<span class="n">Jason</span> <span class="n">Sanford</span> <span class="p">(</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">JasonSanford</span><span class="p">)</span>
<span class="n">Johannes</span> <span class="n">Schönberger</span> <span class="p">(</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">ahojnnes</span><span class="p">)</span>
<span class="n">Jonathan</span> <span class="n">Tartley</span>
<span class="n">Kristian</span> <span class="n">Thy</span>
<span class="n">Mike</span> <span class="n">Toews</span> <span class="p">(</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">mwtoews</span><span class="p">)</span>
<span class="n">Maarten</span> <span class="n">Vermeyen</span> <span class="p">(</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">maarten</span><span class="o">-</span><span class="n">vermeyen</span><span class="p">)</span>
</pre></div>
</div>
<p>See also: <a class="reference external" href="https://github.com/Toblerity/Shapely/graphs/contributors">https://github.com/Toblerity/Shapely/graphs/contributors</a>.</p>
<p>Additional help from:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Justin</span> <span class="n">Bronn</span> <span class="p">(</span><span class="n">GeoDjango</span><span class="p">)</span> <span class="k">for</span> <span class="n">ctypes</span> <span class="n">inspiration</span>
<span class="n">Martin</span> <span class="n">Davis</span> <span class="p">(</span><span class="n">JTS</span><span class="p">)</span>
<span class="n">Jaakko</span> <span class="n">Salli</span> <span class="k">for</span> <span class="n">the</span> <span class="n">Windows</span> <span class="n">distributions</span>
<span class="n">Sandro</span> <span class="n">Santilli</span><span class="p">,</span> <span class="n">Mateusz</span> <span class="n">Loskot</span><span class="p">,</span> <span class="n">Paul</span> <span class="n">Ramsey</span><span class="p">,</span> <span class="n">et</span> <span class="n">al</span> <span class="p">(</span><span class="n">GEOS</span> <span class="n">Project</span><span class="p">)</span>
</pre></div>
</div>
<p>Major portions of this work were supported by a grant (for Pleiades)
from the U.S. National Endowment for the Humanities
(<a class="reference external" href="http://www.neh.gov">http://www.neh.gov</a>).</p>
</div>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; 版权所有 2016, http://www.supermap.com,http://www.supermap.com.cn.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/translations.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>